{% extends "base.html" %}

{% block title %}Briefing #{{ briefing.id }} - Detalhes{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center">
            <h2><i class="bi bi-file-earmark-text"></i> Briefing #{{ briefing.id }}</h2>
            <div>
                <a href="{{ url_for('briefing_lista') }}" class="btn btn-secondary">
                    <i class="bi bi-arrow-left"></i> Voltar
                </a>
                <button onclick="window.print()" class="btn btn-primary">
                    <i class="bi bi-printer"></i> Imprimir
                </button>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-8">
        <div class="card mb-4">
            <div class="card-header">
                <i class="bi bi-info-circle"></i> Informações Básicas
            </div>
            <div class="card-body">
                <div class="row mb-3">
                    <div class="col-md-6">
                        <strong>Secretaria Responsável:</strong>
                        <p>{{ briefing.secretaria_responsavel }}</p>
                    </div>
                    <div class="col-md-6">
                        <strong>Responsável pelo Evento:</strong>
                        <p>{{ briefing.responsavel_evento }}</p>
                    </div>
                </div>
                
                <div class="row mb-3">
                    <div class="col-md-6">
                        <strong>Contato WhatsApp:</strong>
                        <p>{{ briefing.contato_whats }}</p>
                    </div>
                    <div class="col-md-6">
                        <strong>Quantidade de Beneficiados:</strong>
                        <p>{{ briefing.qtd_beneficiados if briefing.qtd_beneficiados else '-' }}</p>
                    </div>
                </div>
                
                <div class="mb-3">
                    <strong>Data, Hora e Local:</strong>
                    <p>{{ briefing.data_hora_local if briefing.data_hora_local else '-' }}</p>
                </div>
            </div>
        </div>
        
        <div class="card mb-4">
            <div class="card-header">
                <i class="bi bi-clipboard-check"></i> Descrição do Evento
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <strong>Qual ação comunicar?</strong>
                    <p>{{ briefing.acao_evento if briefing.acao_evento else '-' }}</p>
                </div>
                
                <div class="mb-3">
                    <strong>Autoridades Presentes:</strong>
                    <p>{{ briefing.autoridades_presentes if briefing.autoridades_presentes else '-' }}</p>
                </div>
                
                <div class="mb-3">
                    <strong>Objetivo Principal:</strong>
                    <p>{{ briefing.objetivo_principal if briefing.objetivo_principal else '-' }}</p>
                </div>
                
                <div class="mb-3">
                    <strong>Descrição Detalhada da Ação:</strong>
                    <p>{{ briefing.descricao_acao if briefing.descricao_acao else '-' }}</p>
                </div>
                
                <div class="mb-3">
                    <strong>Parceiros (para logos):</strong>
                    <p>{{ briefing.parceiros_logos if briefing.parceiros_logos else '-' }}</p>
                </div>
            </div>
        </div>
        
        <div class="card mb-4">
            <div class="card-header">
                <i class="bi bi-palette"></i> Solicitações de Produção
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <strong>Profissionais Solicitados:</strong>
                    <p>{{ briefing.solicitacao_profissionais if briefing.solicitacao_profissionais else '-' }}</p>
                </div>
                
                <div class="mb-3">
                    <strong>Meios Digitais:</strong>
                    <p>{{ briefing.meios_digitais if briefing.meios_digitais else '-' }}</p>
                </div>
                
                <div class="mb-3">
                    <strong>Meios Impressos:</strong>
                    <p>{{ briefing.meios_impressos if briefing.meios_impressos else '-' }}</p>
                    {% if briefing.meios_impressos %}
                    <div class="alert alert-warning">
                        <i class="bi bi-exclamation-triangle"></i>
                        Materiais impressos só podem ser produzidos com dispensa ou licitação.
                    </div>
                    {% endif %}
                </div>
                
                <div class="mb-3">
                    <strong>Medidas do Material:</strong>
                    <p>{{ briefing.medidas_material if briefing.medidas_material else '-' }}</p>
                </div>
            </div>
        </div>
        
        {% if briefing.imagens_anexo %}
        <div class="card mb-4">
            <div class="card-header">
                <i class="bi bi-image"></i> Imagens Anexadas
            </div>
            <div class="card-body">
                <div class="row">
                    {% for imagem in briefing.imagens_anexo.split(',') %}
                    <div class="col-md-4 mb-3">
                        <a href="{{ url_for('static', filename='uploads/briefings/' + imagem) }}" target="_blank">
                            <img src="{{ url_for('static', filename='uploads/briefings/' + imagem) }}" 
                                 class="img-thumbnail" style="width: 100%; height: 200px; object-fit: cover;">
                        </a>
                        <small class="d-block text-center mt-1">{{ imagem }}</small>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endif %}
    </div>
    
    <div class="col-md-4">
        <div class="card mb-4">
            <div class="card-header">
                <i class="bi bi-gear"></i> Status e Informações
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <strong>Status Atual:</strong>
                    <p>
                        {% if briefing.status == 'Recebido' %}
                            <span class="status-badge bg-info">{{ briefing.status }}</span>
                        {% elif briefing.status == 'Em Produção' %}
                            <span class="status-badge bg-warning text-dark">{{ briefing.status }}</span>
                        {% elif briefing.status == 'Concluído' %}
                            <span class="status-badge bg-success">{{ briefing.status }}</span>
                        {% else %}
                            <span class="status-badge bg-secondary">{{ briefing.status }}</span>
                        {% endif %}
                    </p>
                </div>
                
                <div class="mb-3">
                    <strong>Data de Criação:</strong>
                    <p>{{ briefing.data_criacao.strftime('%d/%m/%Y às %H:%M') }}</p>
                </div>
                
                <div class="mb-3">
                    <strong>Criado Por:</strong>
                    <p>{{ briefing.criado_por }}</p>
                </div>
                
                {% if current_user.perfil == 'admin' %}
                <hr>
                <div class="d-grid gap-2">
                    <strong>Alterar Status:</strong>
                    <a href="{{ url_for('briefing_status', id=briefing.id, status='Recebido') }}" 
                       class="btn btn-info btn-sm">
                        <i class="bi bi-inbox"></i> Recebido
                    </a>
                    <a href="{{ url_for('briefing_status', id=briefing.id, status='Em Produção') }}" 
                       class="btn btn-warning btn-sm">
                        <i class="bi bi-hourglass-split"></i> Em Produção
                    </a>
                    <a href="{{ url_for('briefing_status', id=briefing.id, status='Concluído') }}" 
                       class="btn btn-success btn-sm">
                        <i class="bi bi-check-circle"></i> Concluído
                    </a>
                </div>
                {% endif %}
            </div>
        </div>
        
        <div class="card">
            <div class="card-header">
                <i class="bi bi-info-circle"></i> Dicas
            </div>
            <div class="card-body">
                <small>
                    <ul class="mb-0">
                        <li>Clique nas imagens para visualizá-las em tamanho original</li>
                        <li>Use o botão "Imprimir" para gerar uma versão para arquivo</li>
                        <li>Entre em contato com o responsável para esclarecer dúvidas</li>
                    </ul>
                </small>
            </div>
        </div>
    </div>
</div>
{% endblock %}